<!-- ============================================================
     SE√á√ÉO DO ALGORITMO DE AN√ÅLISE DE ENTROPIA
     Copie e cole esta se√ß√£o no seu index.html dentro da tag <main>
     ============================================================ -->

<section id="algoritmo" class="secao-algoritmo">
  <div class="container">
    
    <!-- T√≠tulo e Descri√ß√£o -->
    <h2 class="algoritmo-titulo">ü§ñ Ferramenta Interativa: Analise Seu Pr√≥prio Texto</h2>
    
    <p class="algoritmo-descricao">
      Voc√™ tem um texto e quer saber se ele √© r√≠gido ou flex√≠vel? Cole aqui e deixe a <strong>F√≠sica Informacional</strong> fazer a an√°lise! 
      O algoritmo vai calcular a entropia, detectar padr√µes discursivos e comparar com os padr√µes que a gente encontrou na pesquisa.
    </p>

    <!-- Formul√°rio de Input -->
    <form class="algoritmo-form" onsubmit="event.preventDefault(); analisarTextoUsuario();">
      <div class="form-group">
        <label for="textoInput">Cole seu texto aqui (m√≠nimo 50 palavras):</label>
        <textarea 
          id="textoInput" 
          placeholder="Cole um trecho de um artigo, decis√£o judicial, ou qualquer texto que voc√™ queira analisar. Quanto mais longo, melhor a an√°lise!"
          aria-label="Campo para colar texto para an√°lise"
        ></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-analisar">
          ‚ö° Analisar Entropia
        </button>
        <button type="button" class="btn-limpar" onclick="limparAnalise()">
          üîÑ Limpar
        </button>
      </div>
    </form>

    <!-- Se√ß√£o de Resultados (inicialmente oculta) -->
    <div id="resultados">
      
      <!-- 1. CLASSIFICA√á√ÉO DE RIGIDEZ -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">üìä Classifica√ß√£o de Rigidez/Flexibilidade</h3>
        <div id="classificacaoRigidez"></div>
      </div>

      <!-- 2. BARRA DE RIGIDEZ -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">üìà Escala de Rigidez Discursiva</h3>
        <div id="barraRigidez"></div>
      </div>

      <!-- 3. NUVEM DE PALAVRAS -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">‚òÅÔ∏è Palavras-Chave (Nuvem)</h3>
        <p style="color: #9CA3AF; font-size: 0.95rem; margin-bottom: 1rem;">
          Quanto maior a palavra, mais frequente ela aparece no seu texto. Essas s√£o as palavras que definem o seu discurso.
        </p>
        <div id="nuvemPalavras"></div>
      </div>

      <!-- 4. PADR√ïES DETECTADOS -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">üîç Padr√µes Discursivos Detectados</h3>
        <p style="color: #9CA3AF; font-size: 0.95rem; margin-bottom: 1rem;">
          Esses s√£o os padr√µes que indicam rigidez ou flexibilidade no seu discurso:
        </p>
        <div id="padroes"></div>
      </div>

      <!-- 5. COMPARA√á√ÉO COM PADR√ïES -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">üéØ Compara√ß√£o com Padr√µes Conhecidos</h3>
        <p style="color: #9CA3AF; font-size: 0.95rem; margin-bottom: 1rem;">
          Comparamos seu texto com os padr√µes que encontramos na pesquisa:
        </p>
        <div id="comparacao"></div>
      </div>

      <!-- 6. GR√ÅFICO DE ENTROPIA -->
      <div class="resultado-secao">
        <h3 class="resultado-titulo">üìâ Gr√°fico Comparativo de Entropia</h3>
        <div class="grafico-container">
          <canvas id="graficoEntropiaComparativa"></canvas>
        </div>
      </div>

    </div>

    <!-- Exemplos e Dicas -->
    <div class="exemplos-container">
      <h3 class="exemplos-titulo">üí° Exemplos para Testar</h3>
      
      <div class="exemplo-item">
        <div class="exemplo-titulo">Exemplo 1: Texto R√≠gido (com "travestida de")</div>
        <div class="exemplo-texto">
          "A a√ß√£o est√° travestida de legitimidade. O autor alega que a a√ß√£o est√° travestida de direito. A decis√£o anterior estava travestida de fundamenta√ß√£o. O recurso est√° travestida de raz√£o jur√≠dica v√°lida."
        </div>
      </div>

      <div class="exemplo-item">
        <div class="exemplo-titulo">Exemplo 2: Texto Flex√≠vel (variado)</div>
        <div class="exemplo-texto">
          "A jurisprud√™ncia brasileira tem evolu√≠do significativamente. Os tribunais reconhecem diferentes perspectivas. A doutrina aponta para novas interpreta√ß√µes. As decis√µes contempor√¢neas refletem essa diversidade de pensamento."
        </div>
      </div>

      <div class="exemplo-item">
        <div class="exemplo-titulo">Dica: Copie um ac√≥rd√£o real</div>
        <div class="exemplo-texto">
          Voc√™ pode copiar um ac√≥rd√£o real de um tribunal (dispon√≠vel em sites como tjsp.jus.br, stj.jus.br, etc.) e analisar a entropia da linguagem jur√≠dica!
        </div>
      </div>
    </div>

  </div>
</section>

<!-- ============================================================
     SCRIPTS NECESS√ÅRIOS
     Adicione estas linhas no final do seu index.html, antes de </body>
     ============================================================ -->

<!-- Script do Analisador de Entropia -->
<script src="js/entropia-avancado.js"></script>

<!-- CSS do Algoritmo -->
<link rel="stylesheet" href="css/entropia-visualizacoes.css">

<!-- Script para Gr√°ficos (se n√£o estiver inclu√≠do) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

<!-- Script para inicializar gr√°ficos -->
<script>
function initGraficoEntropiaComparativa(entropiaNormalizada) {
  const ctx = document.getElementById('graficoEntropiaComparativa');
  if (!ctx) return;

  // Destruir gr√°fico anterior se existir
  if (window.graficoEntropiaInstance) {
    window.graficoEntropiaInstance.destroy();
  }

  window.graficoEntropiaInstance = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Seu Texto', 'Padr√£o R√≠gido\n(com "travestida de")', 'Padr√£o Flex√≠vel\n(sem "travestida de")'],
      datasets: [{
        label: 'Entropia (S*)',
        data: [entropiaNormalizada, 2.8, 3.5],
        backgroundColor: [
          '#00A0D6',
          '#EF4444',
          '#10B981'
        ],
        borderColor: [
          '#0088B8',
          '#DC2626',
          '#059669'
        ],
        borderWidth: 2,
        borderRadius: 8,
        padding: 10
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: true,
          labels: {
            color: '#E5E7EB',
            font: {
              size: 14,
              weight: '600'
            }
          }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleColor: '#E5E7EB',
          bodyColor: '#E5E7EB',
          borderColor: '#00A0D6',
          borderWidth: 1,
          padding: 12,
          displayColors: false,
          callbacks: {
            label: function(context) {
              return 'Entropia: ' + context.parsed.y.toFixed(2);
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          max: 4,
          ticks: {
            color: '#9CA3AF',
            font: {
              size: 12
            }
          },
          grid: {
            color: 'rgba(0, 160, 214, 0.1)',
            drawBorder: false
          },
          title: {
            display: true,
            text: 'Entropia (S*)',
            color: '#E5E7EB'
          }
        },
        x: {
          ticks: {
            color: '#9CA3AF',
            font: {
              size: 12
            }
          },
          grid: {
            display: false,
            drawBorder: false
          }
        }
      }
    }
  });
}

// Exportar fun√ß√£o para uso global
window.initGraficoEntropiaComparativa = initGraficoEntropiaComparativa;
</script>
